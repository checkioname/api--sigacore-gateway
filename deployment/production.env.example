# ============================================
# CONFIGURAÇÃO DE PRODUÇÃO - SIGA CORE GATEWAY
# ============================================
# Este arquivo é um TEMPLATE para configuração de produção.
# 
# INSTRUÇÕES:
# 1. Copie este arquivo para um local seguro FORA do repositório
# 2. Substitua todos os valores com dados reais
# 3. Configure no sistema como variáveis de ambiente
# 4. NUNCA comite este arquivo com valores reais

# ============================================
# AMBIENTE
# ============================================
ENVIRONMENT=production

# ============================================
# BANCO DE DADOS (OBRIGATÓRIO SSL)
# ============================================
# Use credenciais únicas e SSL obrigatório
# Exemplo: postgresql://usuario:senha_forte@host:5432/database?sslmode=require
DB_SOURCE=postgresql://USUARIO_DB:SENHA_FORTE_AQUI@seu-host-db:5432/sigacore_prod?sslmode=require

# ============================================
# TOKENS - CHAVES CRIPTOGRÁFICAS
# ============================================
# Gere uma chave única de 32 caracteres usando:
# go run scripts/generate-key.go
TOKEN_SYMMETRIC_KEY=SUBSTITUA_POR_CHAVE_GERADA_32_CHARS

# Durações dos tokens (ajuste conforme necessário)
ACCESS_TOKEN_DURATION=15m
REFRESH_TOKEN_DURATION=168h  # 7 dias

# ============================================
# ENDEREÇOS DOS SERVIÇOS
# ============================================
# Use endereços internos da rede ou load balancers
AUTH_SERVER_ADDRESS=0.0.0.0:8080
GATEWAY_SERVER_ADDRESS=0.0.0.0:8081

# Microserviços - ajuste conforme sua infraestrutura
USER_SERVICE_ADDRESS=https://user-service.interno:443
DOC_SERVICE_ADDRESS=https://report-service.interno:443
NOTIFICATION_SERVICE_ADDRESS=https://notification-service.interno:443

# ============================================
# CONTROLE DE ACESSO
# ============================================
# IPs permitidos (CIDR ou IPs específicos)
# Exemplo: 10.0.0.0/8,192.168.1.100,203.0.113.0/24
ALLOWED_IPS=SEU_IP_PRODUCAO_AQUI

# ============================================
# CONFIGURAÇÕES ADICIONAIS DE SEGURANÇA
# ============================================
# Estas podem ser adicionadas conforme necessário:

# Rate limiting por IP (requisições por segundo)
RATE_LIMIT_PER_IP=10

# Rate limiting por usuário
RATE_LIMIT_PER_USER=100

# Timeout para operações de banco (segundos)
DB_TIMEOUT=30

# Nível de log (error, warn, info, debug)
LOG_LEVEL=info

# Webhook para alertas de segurança
SECURITY_WEBHOOK_URL=https://seu-webhook-alertas.com/endpoint

# ============================================
# EXEMPLO DE SCRIPT DE DEPLOYMENT
# ============================================
# 
# #!/bin/bash
# # Script para configurar variáveis em produção
# 
# # Carregar configurações do arquivo seguro
# source /path/to/secure/production.env
# 
# # Exportar variáveis
# export ENVIRONMENT="$ENVIRONMENT"
# export DB_SOURCE="$DB_SOURCE"
# export TOKEN_SYMMETRIC_KEY="$TOKEN_SYMMETRIC_KEY"
# export ACCESS_TOKEN_DURATION="$ACCESS_TOKEN_DURATION"
# export REFRESH_TOKEN_DURATION="$REFRESH_TOKEN_DURATION"
# export AUTH_SERVER_ADDRESS="$AUTH_SERVER_ADDRESS"
# export GATEWAY_SERVER_ADDRESS="$GATEWAY_SERVER_ADDRESS"
# export USER_SERVICE_ADDRESS="$USER_SERVICE_ADDRESS"
# export REPORT_SERVICE_ADDRESS="$REPORT_SERVICE_ADDRESS"
# export NOTIFICATION_SERVICE_ADDRESS="$NOTIFICATION_SERVICE_ADDRESS"
# export ALLOWED_IPS="$ALLOWED_IPS"
# 
# # Verificar se todas as variáveis estão configuradas
# if [[ -z "$TOKEN_SYMMETRIC_KEY" || "$TOKEN_SYMMETRIC_KEY" == *"SUBSTITUA"* ]]; then
#     echo "ERRO: TOKEN_SYMMETRIC_KEY não foi configurada corretamente"
#     exit 1
# fi
# 
# # Iniciar aplicação
# ./bin/combined

# ============================================
# CONFIGURAÇÃO PARA DOCKER/KUBERNETES
# ============================================
# 
# Para Docker:
# docker run -d \
#   -e ENVIRONMENT=production \
#   -e DB_SOURCE="postgresql://..." \
#   -e TOKEN_SYMMETRIC_KEY="sua-chave" \
#   -p 8081:8081 \
#   seu-registry/sigacore-gateway:latest
# 
# Para Kubernetes (usar Secrets):
# apiVersion: v1
# kind: Secret
# metadata:
#   name: sigacore-secrets
# type: Opaque
# stringData:
#   token-key: "sua-chave-secreta"
#   db-source: "postgresql://..."

# ============================================
# CHECKLIST DE SEGURANÇA PARA PRODUÇÃO
# ============================================
# 
# ✅ Chave simétrica gerada criptograficamente
# ✅ Banco de dados com SSL habilitado
# ✅ IPs permitidos configurados corretamente
# ✅ Credenciais padrão removidas
# ✅ Variáveis de ambiente configuradas no sistema
# ✅ Logs de auditoria habilitados
# ✅ HTTPS configurado (certificados válidos)
# ✅ Firewall configurado
# ✅ Monitoramento e alertas implementados
# ✅ Backup das configurações realizado
# ✅ Documentação atualizada 